# WordPressアプリケーションパスワード設定ガイド

## 📋 概要

WordPress REST APIで記事を投稿するためのアプリケーションパスワードの設定方法です。

---

## 🔑 既存のアプリケーションパスワードを使用

**既に「GitHub Sync」という名前でアプリケーションパスワードを作成済みの場合、それを使用できます。**

既存の「GitHub Sync」パスワードを使う場合：
- ✅ 新しいパスワードを作成する必要はありません
- ✅ 既存のパスワードを`.env`ファイルに設定するだけです

**注意:** アプリケーションパスワードは表示されないため、既存のパスワードが分からない場合は新しいパスワードを作成する必要があります。

---

## 🆕 新しいアプリケーションパスワードを作成する場合

### Step 1: WordPress管理画面にログイン

1. WordPress管理画面（`https://cbd-no-hito.com/wp-admin/`）にログイン

### Step 2: アプリケーションパスワードの作成

1. **「ユーザー」→「プロフィール」を開く**
   - 左メニューの「ユーザー」をクリック
   - 「プロフィール」をクリック

2. **「アプリケーションパスワード」セクションを開く**
   - ページをスクロールして「アプリケーションパスワード」セクションを見つける

3. **新しいアプリケーションパスワードを作成**
   - 「新しいアプリケーションパスワード名」に名前を入力（例: "Cursor Article Generator"）
   - 「新しいパスワードを追加」をクリック

4. **生成されたパスワードをコピー**
   - パスワードが表示されます（例: `dHGO JH2x DTnM zzj8 2KXd G7dj`）
   - **このパスワードは一度しか表示されないので、必ずコピーしてください**

### Step 3: .envファイルに設定

`.env`ファイルに以下を設定：

```env
WORDPRESS_USERNAME=yoshiki
WORDPRESS_APP_PASSWORD=dHGO JH2x DTnM zzj8 2KXd G7dj
```

**注意:**
- パスワードのスペースはそのまま含めてください（例: `dHGO JH2x DTnM zzj8 2KXd G7dj`）
- `.env`ファイルは`.gitignore`に含まれているため、GitHubにコミットされません

---

## ✅ 動作確認

### 1. .envファイルの設定確認

```bash
grep -E "WORDPRESS_USERNAME|WORDPRESS_APP_PASSWORD" .env
```

**実行結果例:**
```
WORDPRESS_USERNAME=yoshiki
WORDPRESS_APP_PASSWORD=dHGO JH2x DTnM zzj8 2KXd G7dj
```

### 2. テスト実行

記事生成スクリプトをテスト実行：

```bash
python automation/content/article_generator_v2.py
```

**実行結果:** エラーが表示されなければ成功です

---

## 🔧 トラブルシューティング

### エラー1: `401 Unauthorized`

**原因:** アプリケーションパスワードが正しくない

**解決方法:**
1. `.env`ファイルの`WORDPRESS_APP_PASSWORD`を確認
2. パスワードにスペースが含まれているか確認
3. 新しいアプリケーションパスワードを作成して再設定

### エラー2: `403 Forbidden`

**原因:** ユーザーの権限が不足している

**解決方法:**
1. WordPress管理画面でユーザーの権限を確認（「管理者」権限が必要）
2. 必要に応じて権限を変更

### エラー3: `REST API is disabled`

**原因:** WordPress REST APIが無効になっている

**解決方法:**
1. WordPress管理画面で「設定」→「パーマリンク設定」を確認
2. パーマリンク設定を保存（REST APIが有効化される）

---

## 📋 既存のアプリケーションパスワードの確認

### WordPress管理画面から確認

1. WordPress管理画面にログイン
2. 「ユーザー」→「プロフィール」を開く
3. 「アプリケーションパスワード」セクションを開く
4. 既存のアプリケーションパスワードの一覧を確認

**注意:** 既存のパスワードは表示されません（セキュリティ上の理由）。パスワードが分からない場合は、新しいパスワードを作成してください。

---

## 🔄 既存の「GitHub Sync」パスワードを使う場合

既存の「GitHub Sync」パスワードを使う場合：

1. `.env`ファイルに既存のパスワードを設定
2. `WORDPRESS_USERNAME=yoshiki`を設定
3. テスト実行して動作確認

**注意:** 既存のパスワードが分からない場合は、新しいパスワードを作成するか、「GitHub Sync」パスワードを再生成してください。

---

**最終更新:** 2026-01-11
