# X API料金とセットアップガイド

## 💰 X APIの料金について

### ⚠️ 重要なポイント（修正版）

**無料プランでも投稿が可能です！**

画像を確認したところ、「MONTHLY POST CAP USAGE: 0 Posts pulled of 100」と表示されています。

これは、**無料プランでも月間100投稿まで可能**であることを示しています。

---

### 📊 料金体系（2025年1月時点）

#### 基本プラン

1. **Freeプラン（無料）** ✅ 投稿可能
   - 月間100投稿まで（または500投稿まで、アカウントによる）
   - 1日最大17投稿まで
   - 月間100件の読み取りリクエスト

2. **Basicプラン（有料）**
   - 月額 $100（約15,000円）
   - 月間10,000ツイートの投稿まで
   - 月間10,000ツイートの読み取りまで

3. **Proプラン（有料）**
   - 月額 $5,000（約75万円）
   - 月間1,000,000ツイートの投稿まで
   - より高度な機能

4. **Enterpriseプラン（有料）**
   - カスタム価格
   - 無制限に近い利用

---

### 💡 あなたのケース（@otonasan_review）

**推奨プラン: Freeプラン（無料）** ✅

**理由**:
- 無料プランで投稿が可能
- 月間100投稿まで可能 → あなたの運用計画なら十分
- コストがかからない

**月間投稿数の計算**:
- 平日: 2回/日 × 22日 = 44ツイート
- 休日: 3回/日 × 8日 = 24ツイート
- **合計: 約68ツイート/月** → 無料プラン（月間100投稿）で十分 ✅

**結論: 無料プランで運用可能です！**

---

### ⚠️ 注意事項

1. **無料プランでも投稿可能** ✅
   - Freeプランで月間100投稿まで可能
   - あなたの運用計画（月間68ツイート）なら十分

2. **投稿制限の確認**
   - X Developer Consoleの「使用状況」タブで確認
   - 「Dashboard」タブで各アプリの投稿制限を確認
   - 開発者アカウント単位 or アプリ単位の制限を確認

3. **制限に達した場合**
   - 月間100投稿に達したら有料プランへの移行を検討
   - 投稿数を増やしたい場合も有料プランを検討

---

## 🔧 APIセットアップ方法

### ステップ1: API認証情報の取得

X Developer Consoleで以下を取得・生成します：

#### 1. コンシューマーキー（Consumer Key / API Key）

**取得方法**:
1. X Developer Console → 「アプリ」タブ
2. アプリ「otonasan_re」を選択
3. 「OAuth 1.0 キー」セクション
4. 「コンシューマーキー」の「表示する」をクリック
5. キーをコピー

**注意**: これは「API Key」としても表示される場合があります。

---

#### 2. コンシューマーシークレット（Consumer Secret / API Secret Key）

**取得方法**:
1. 同じ「OAuth 1.0 キー」セクション
2. 「コンシューマーシークレット」の「表示する」をクリック
3. シークレットをコピー

**注意**: セキュリティ上、一度しか表示されない場合があります。必ず安全な場所に保存してください。

---

#### 3. アクセストークン（Access Token）

**取得方法**:
1. 同じ画面の「アクセストークン」セクション
2. 「生成する」ボタンをクリック
3. アカウント認証を完了
4. アクセストークンをコピー

**注意**: これは `@otonasan_review` アカウント専用のトークンです。

---

#### 4. アクセストークンシークレット（Access Token Secret）

**取得方法**:
1. アクセストークン生成時に同時に表示される
2. アクセストークンシークレットをコピー

**注意**: これも一度しか表示されない場合があります。

---

#### 5. ベアラートークン（Bearer Token）（オプション）

**取得方法**:
1. 「アプリ専用認証」セクション
2. 「ベアラートークン」の「生成する」をクリック
3. トークンをコピー

**用途**: 読み取り専用の操作に使用（投稿には不要）

---

### ステップ2: 環境変数の設定

`.env`ファイルに以下を追加：

```env
# X API認証情報（@otonasan_review用）
X_API_KEY=[コンシューマーキー]
X_API_SECRET_KEY=[コンシューマーシークレット]
X_ACCESS_TOKEN=[アクセストークン]
X_ACCESS_TOKEN_SECRET=[アクセストークンシークレット]
X_BEARER_TOKEN=[ベアラートークン]（オプション）
```

**例**:
```env
X_API_KEY=abc123xyz...
X_API_SECRET_KEY=def456uvw...
X_ACCESS_TOKEN=ghi789rst...
X_ACCESS_TOKEN_SECRET=jkl012mno...
X_BEARER_TOKEN=pqr345stu...（オプション）
```

---

### ステップ3: 動作確認

```bash
# Twitter API接続テスト
python automation/social_media/x_twitter.py user me

# テストツイート（実際には投稿しない）
python automation/social_media/x_twitter.py tweet "テスト投稿" --dry-run
```

---

## 📋 漫画アカウント用の設定

### 同じAPIアプリを使う場合

**メリット**:
- 1つのアプリで管理が簡単
- 料金は1アプリ分のみ

**設定方法**:
1. 同じX Developer Consoleのアプリを使用
2. 漫画アカウント（例: `@manga_review_18`）でOAuth認証を実行
3. 漫画アカウント用の新しいアクセストークン・シークレットを生成
4. `.env`ファイルに別名で保存：

```env
# 動画アカウント用
X_API_KEY=...
X_API_SECRET_KEY=...
X_ACCESS_TOKEN=...
X_ACCESS_TOKEN_SECRET=...

# 漫画アカウント用
X_API_KEY_COMIC=...（同じコンシューマーキー）
X_API_SECRET_KEY_COMIC=...（同じコンシューマーシークレット）
X_ACCESS_TOKEN_COMIC=...（漫画アカウント用の新しいアクセストークン）
X_ACCESS_TOKEN_SECRET_COMIC=...（漫画アカウント用の新しいシークレット）
```

---

### 別のAPIアプリを作る場合

**メリット**:
- アカウントごとに完全に分離
- 管理が明確

**デメリット**:
- 複数のアプリを管理する必要がある
- 料金が2倍になる可能性（要確認）

**設定方法**:
1. X Developer Consoleで新しいアプリを作成
2. 漫画アカウント用の認証情報を取得
3. `.env`ファイルに別名で保存

---

## 💰 料金の見積もり

### 動画アカウントのみの場合

- **Basicプラン**: 月額 $100（約15,000円）
- **月間投稿数**: 約68ツイート
- **1ツイートあたりのコスト**: 約220円

### 動画 + 漫画アカウントの場合

- **Basicプラン**: 月額 $100（同じアプリを使用する場合）
- **月間投稿数**: 約136ツイート（両方合わせて）
- **1ツイートあたりのコスト**: 約110円

**注意**: 同じアプリを使用する場合、追加料金はかかりません。

---

## ⚠️ 重要な注意事項

1. **認証情報の管理**
   - `.env`ファイルはGitにコミットしない
   - `.gitignore`に追加済みか確認
   - 認証情報は安全に保管

2. **レート制限**
   - Basicプラン: 月間10,000ツイートまで
   - 1日あたり約330ツイートまで
   - あなたの運用計画なら問題なし

3. **料金の確認**
   - X Developer Consoleの「使用状況」で確認
   - 「請求情報」で請求履歴を確認
   - 予算を超えないよう注意

---

## 📝 チェックリスト

### APIセットアップ

- [ ] コンシューマーキーを取得
- [ ] コンシューマーシークレットを取得
- [ ] アクセストークンを生成（@otonasan_review用）
- [ ] アクセストークンシークレットを取得
- [ ] `.env`ファイルに設定
- [ ] 動作確認テスト成功

### 料金確認

- [ ] X Developer Consoleでプランを確認
- [ ] 月額料金を確認
- [ ] 使用状況を定期的に確認
- [ ] 予算を設定

---

**作成日**: 2025-01-30
