# GA4コンバージョン目標の設定ガイド

## 🎯 目的

コンバージョン率（CVR）を測定できるようにし、どのページ・どの施策がコンバージョンに貢献しているかを分析できるようにする。

---

## 📋 設定するコンバージョン目標

### 1. アフィリエイトリンクのクリック
- **目的**: CBD商品リンクのクリックを測定
- **設定方法**: イベントベース（`click`イベント + リンクURL条件）

### 2. お問い合わせフォームの送信
- **目的**: お問い合わせフォームの送信を測定
- **設定方法**: イベントベース（`form_submit`イベント）

### 3. 特定ページの訪問（オプション）
- **目的**: 商品紹介ページなどの訪問を測定
- **設定方法**: イベントベース（`page_view`イベント + ページパス条件）

---

## 🚀 設定手順

### Step 1: GA4管理画面にアクセス

1. **Google Analyticsにログイン**
   - URL: https://analytics.google.com/
   - アカウント: 使用中のアカウント

2. **プロパティを選択**
   - プロパティID: `505457597`
   - アカウントID: `368683003`

3. **管理画面に移動**
   - 左下の「管理」をクリック

---

### Step 2: イベントを作成（必要な場合）

GA4では、デフォルトで多くのイベントが自動収集されています。まず、必要なイベントが収集されているか確認します。

#### 確認すべきイベント

1. **`click`イベント**
   - 自動収集: ✅（デフォルトで収集）
   - 条件: アウトバウンドリンクのクリックを追跡

2. **`form_submit`イベント**
   - 自動収集: ⚠️（設定が必要な場合あり）
   - WordPressプラグイン（例: Contact Form 7）が自動送信する場合は収集される

3. **`page_view`イベント**
   - 自動収集: ✅（デフォルトで収集）

#### イベントの確認方法

1. **リアルタイムレポートで確認**
   - GA4管理画面 → 「レポート」→「リアルタイム」
   - サイトを訪問し、アフィリエイトリンクをクリック
   - イベントが表示されるか確認

2. **イベント一覧で確認**
   - GA4管理画面 → 「設定」→「イベント」
   - イベント一覧を確認

---

### Step 3: コンバージョンイベントを作成

#### 3-1. アフィリエイトリンクのクリック

1. **GA4管理画面 → 「設定」→「イベント」**
2. **「イベントを作成」をクリック**
3. **イベント名を入力**
   - イベント名: `affiliate_link_click`
   - 説明: 「アフィリエイトリンクのクリック」

4. **条件を設定**
   - 条件1: イベント名 = `click`
   - 条件2: リンクURL（`link_url`）にアフィリエイトリンクのドメインが含まれる
     - 例: `link_url` に `amazon.co.jp` が含まれる
     - 例: `link_url` に `rakuten.co.jp` が含まれる
     - 例: `link_url` に `a8.net` が含まれる（アフィリエイトサービスプロバイダー）

5. **「作成」をクリック**

#### 3-2. お問い合わせフォームの送信

1. **GA4管理画面 → 「設定」→「イベント」**
2. **「イベントを作成」をクリック**
3. **イベント名を入力**
   - イベント名: `contact_form_submit`
   - 説明: 「お問い合わせフォームの送信」

4. **条件を設定**
   - 条件1: イベント名 = `form_submit`
   - 条件2: フォームID（`form_id`）またはフォーム名（`form_name`）がお問い合わせフォームと一致
     - 例: `form_id` = `contact-form`
     - 例: `form_name` = `お問い合わせ`

5. **「作成」をクリック**

#### 3-3. 特定ページの訪問（オプション）

1. **GA4管理画面 → 「設定」→「イベント」**
2. **「イベントを作成」をクリック**
3. **イベント名を入力**
   - イベント名: `product_page_view`
   - 説明: 「商品紹介ページの訪問」

4. **条件を設定**
   - 条件1: イベント名 = `page_view`
   - 条件2: ページパス（`page_path`）が特定のパスを含む
     - 例: `page_path` に `/cbd-oil/` が含まれる
     - 例: `page_path` に `/cbd-capsule/` が含まれる

5. **「作成」をクリック**

---

### Step 4: コンバージョンとしてマーク

1. **GA4管理画面 → 「設定」→「イベント」**
2. **作成したイベントを探す**
   - `affiliate_link_click`
   - `contact_form_submit`
   - `product_page_view`（オプション）

3. **各イベントの「コンバージョンとしてマーク」トグルをONにする**

---

### Step 5: 確認

1. **コンバージョンレポートで確認**
   - GA4管理画面 → 「レポート」→「エンゲージメント」→「コンバージョン」
   - 設定したコンバージョンイベントが表示されるか確認

2. **リアルタイムで確認**
   - GA4管理画面 → 「レポート」→「リアルタイム」
   - サイトを訪問し、アフィリエイトリンクをクリック
   - コンバージョンが記録されるか確認

---

## 🔍 アフィリエイトリンクのドメイン確認

WordPressサイトで使用しているアフィリエイトリンクのドメインを確認する必要があります。

### 確認方法

1. **WordPress管理画面にアクセス**
   - URL: https://cbd-no-hito.com/wp-admin/

2. **既存記事を確認**
   - アフィリエイトリンクが含まれている記事を開く
   - リンクのURLを確認

3. **よく使われるアフィリエイトドメイン**
   - Amazonアソシエイト: `amazon.co.jp`, `amzn.to`
   - 楽天アフィリエイト: `rakuten.co.jp`, `r10.to`
   - A8.net: `a8.net`, `a8.to`
   - その他アフィリエイトサービスプロバイダー

---

## 📊 設定後の確認事項

### 1. コンバージョンイベントが記録されているか
- GA4管理画面 → 「レポート」→「エンゲージメント」→「コンバージョン」
- 過去7日間のデータを確認

### 2. どのページがコンバージョンに貢献しているか
- GA4管理画面 → 「探索」→「空の探索」
- ディメンション: `page_path`
- 指標: `affiliate_link_click`（コンバージョンイベント）
- ページごとのコンバージョン数を確認

### 3. コンバージョン率（CVR）の計算
- CVR = コンバージョン数 ÷ セッション数 × 100
- 例: コンバージョン数 10 ÷ セッション数 100 × 100 = 10%

---

## ⚠️ 注意事項

### 1. イベントの収集には時間がかかる場合がある
- GA4では、イベントの収集と反映に時間がかかることがあります
- リアルタイムレポートでは確認できますが、通常のレポートには反映までに時間がかかります

### 2. アフィリエイトリンクのドメインが複数ある場合
- 複数のアフィリエイトサービスプロバイダーを使用している場合、それぞれのドメインを条件に含める必要があります
- 例: `link_url` に `amazon.co.jp` または `rakuten.co.jp` または `a8.net` が含まれる

### 3. フォームのイベント送信が自動で行われていない場合
- WordPressプラグインが自動でイベントを送信しない場合、手動で設定する必要があります
- Google Tag Managerを使用するか、プラグインの設定を確認してください

---

## 🚀 次のステップ

1. **コンバージョン率の分析**
   - ページごとのコンバージョン率を分析
   - どのページがコンバージョンに貢献しているか特定

2. **コンバージョン導線の最適化**
   - コンバージョン率の高いページの特徴を分析
   - コンバージョン率の低いページを改善

3. **A/Bテストの実施**
   - CTA（Call to Action）の配置をテスト
   - アフィリエイトリンクの配置をテスト

---

## 📝 参考情報

### GA4公式ドキュメント
- [コンバージョンの設定](https://support.google.com/analytics/answer/9267568)
- [イベントの作成](https://support.google.com/analytics/answer/9267735)

### アフィリエイトリンクのトラッキング
- Google Tag Managerを使用する方法も検討できます
- WordPressプラグイン（例: MonsterInsights）を使用する方法も検討できます
