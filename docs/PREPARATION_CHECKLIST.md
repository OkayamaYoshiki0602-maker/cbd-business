# 申請承認までの準備チェックリスト（2日間）

## ✅ 同じAPI IDで動画・漫画両方のアカウントを使えるか？

### 答え: **はい、同じAPI IDとアフィリエイトIDを使用可能です** ✅

**理由**:
- API IDは「開発者」単位で発行されるもの
- 1つのAPI IDで複数のサイト/アカウントを運営可能
- ただし、各サイトは「サイト追加申請」で別々に登録する必要があります

**運用イメージ**:
```
API ID: [1つ]
アフィリエイトID: [1つ]
↓
├─ 動画アカウント (@otonasan_review) ← サイト追加申請済み
└─ 漫画アカウント (@[漫画アカウント名]) ← 別途サイト追加申請が必要
```

詳細は `docs/DMM_API_MULTIPLE_ACCOUNTS.md` を参照してください。

---

## 🔄 動画アフィリエイトツイートの流れ（詳細）

### 完全なフロー図

```
【ステップ1: 商品検索】
DMM API → キーワード検索 → 商品リスト取得
例: 「新作AV」で検索 → 10件の商品情報を取得

【ステップ2: 商品情報の取得】
商品ID (content_id) → 詳細情報取得
- タイトル: 「○○○」
- 女優: 「○○みく」
- 発売日: 「2025/02/01」
- サンプル画像URL: 「https://...」
- アフィリエイトリンク: 「https://al.dmm.co.jp/?lurl=...」

【ステップ3: 画像ダウンロード】
サンプル画像URL → HTTPリクエスト → ローカルに保存
保存先: ./temp_images/d_715045.jpg

【ステップ4: ツイート文案生成】
商品情報 → テンプレート適用 → ツイート文案
↓
【作品タイトル】
女優: ○○みく
発売日: 2025/02/01

人気女優の最新作！プレミアムな映像で楽しめます✨

詳細・購入⇩
https://al.dmm.co.jp/?lurl=...
#AV #エロ動画 #R18 🔞

【ステップ5: Twitter投稿】
画像 + ツイート文案 → Twitter API
1. 画像をアップロード → メディアID取得
2. ツイート投稿（テキスト + メディアID）
→ 投稿完了！
```

---

## 📋 申請承認までの準備（2日間）

### Day 1: 今日やること

#### 1. Twitterアカウント設定 ✅

**@otonasan_review のプロフィール完成**

- [ ] **表示名**: `新作AV情報🔞 | 18歳未満閲覧禁止`
- [ ] **プロフィール説明**: 
  ```
  🔞 18歳未満の方の閲覧・フォローはご遠慮ください
  
  📹 新作AV情報を発信
  💬 人気作品・おすすめ作品を紹介
  🎯 最新情報をいち早くお届け
  
  #AV #エロ動画 #R18
  
  ※アフィリエイトリンクを含みます
  ```
- [ ] **プロフィール画像**: 控えめなアイコン（R18表記など）
- [ ] **ピン留めツイート**: 18歳未満閲覧禁止の注意書きを作成

**所要時間**: 15分

---

#### 2. Twitter API認証情報の確認 ✅

`.env`ファイルを確認:

```bash
# automation/.env または ルートの .env
X_API_KEY=...
X_API_SECRET_KEY=...
X_ACCESS_TOKEN=...
X_ACCESS_TOKEN_SECRET=...
X_BEARER_TOKEN=...
```

**確認事項**:
- [ ] すべての値が設定されているか
- [ ] @otonasan_review 用の認証情報か確認
- [ ] まだ設定されていない場合は、Twitter Developer Portalで取得

**所要時間**: 10分（既に設定済みなら確認のみ）

---

#### 3. 依存ライブラリのインストール ✅

```bash
cd automation
pip install dmm-search3
```

**確認**:
```bash
pip list | grep dmm-search3
```

**所要時間**: 2分

---

#### 4. ディレクトリ構造の準備 ✅

```bash
cd automation
mkdir -p temp_images
mkdir -p dmm_images
mkdir -p logs
```

**所要時間**: 1分

---

#### 5. テスト用商品リストの準備 ✅

**Googleスプレッドシートを作成**（またはCSVファイル）

**スプレッドシート名**: `動画アフィリエイト投稿管理`

**列構成**:
| content_id | title | 女優 | 発売日 | ジャンル | 投稿予定日 | 投稿時刻 | ステータス | ツイートURL |
|------------|-------|------|--------|----------|------------|----------|------------|-------------|
| d_715045 | 作品タイトル | 女優名 | 2025/02/01 | レズビアン | 2025/02/01 | 13:00 | 未投稿 | |

**ステータス値**:
- `未投稿`: まだ投稿していない
- `投稿済み`: 投稿完了
- `エラー`: 投稿に失敗

**所要時間**: 10分

---

### Day 2: 明日やること

#### 6. ツイートテンプレートの設計 ✅

**複数のバリエーションを作成**

**テンプレート1: 新作紹介**
```
【{title}】
女優: {actress}
発売日: {release_date}

新作が登場！{genre}ジャンルの人気作品です✨

詳細・購入⇩
{affiliate_url}
#AV #エロ動画 #R18 🔞
```

**テンプレート2: 人気作品**
```
【{title}】
女優: {actress}
発売日: {release_date}

人気女優の代表作！{description}

詳細・購入⇩
{affiliate_url}
#AV #エロ動画 #R18 🔞
```

**テンプレート3: シンプル版**
```
【{title}】
女優: {actress}
発売日: {release_date}

詳細・購入⇩
{affiliate_url}
#AV #エロ動画 #R18 🔞
```

**ファイル**: `automation/social_media/templates/video_tweet_templates.py`（新規作成）

**所要時間**: 30分

---

#### 7. スケジュール投稿の設計 ✅

**投稿頻度の決定**

- **平日**: 2回/日
  - 13:00（お昼休み）
  - 20:00（夜）
  
- **休日**: 3回/日
  - 11:00（午前）
  - 15:00（午後）
  - 21:00（夜）

**実装方法**:
- 既存の `scheduled_tweet.py` を拡張
- または `schedule` ライブラリを使用

**ファイル**: `automation/scripts/scheduled_adult_tweet.py`（新規作成予定）

**所要時間**: 30分（設計のみ、実装は承認後）

---

#### 8. 漫画アカウントの準備 ✅

**次のステップとして**:
- [ ] 漫画用Twitterアカウント名を決定
  - 候補: `@manga_review_18`、`@comic_info_18` など
- [ ] Twitterアカウント作成（承認後に）
- [ ] プロフィール設定（承認後に）
- [ ] DMMサイト追加申請（動画アカウント承認後に）

**所要時間**: 10分（名前決定のみ）

---

## 📊 チェックリスト（まとめ）

### Day 1（今日）

- [ ] Twitterアカウント @otonasan_review のプロフィール設定完了
- [ ] Twitter API認証情報の確認・設定
- [ ] 依存ライブラリインストール（dmm-search3）
- [ ] ディレクトリ構造準備（temp_images等）
- [ ] テスト用商品リスト作成（スプレッドシート）

### Day 2（明日）

- [ ] ツイートテンプレート設計（3種類以上）
- [ ] スケジュール投稿の設計（投稿時間決定）
- [ ] 漫画アカウント名決定

### 申請承認後（2日後以降）

- [ ] DMM API認証情報を.envに設定
- [ ] DMM API接続テスト
- [ ] ツイート生成テスト（dry-run）
- [ ] テスト投稿（1件）
- [ ] 本格運用開始

---

## 🚀 承認後の初回テスト手順

### ステップ1: 環境変数設定

```bash
# .envファイルに追加
DMM_API_ID=[申請承認後に取得]
DMM_AFFILIATE_ID=[申請承認後に取得]
```

### ステップ2: 接続テスト

```bash
cd automation
python social_media/dmm_affiliate.py search AV
```

### ステップ3: ツイート生成テスト（dry-run）

```bash
python social_media/adult_twitter_generator.py video \
  --search AV \
  --count 3 \
  --dry-run
```

### ステップ4: 実際に投稿（テスト1件）

```bash
python social_media/adult_twitter_generator.py video \
  --content-id d_715045
```

---

**作成日**: 2025-01-30
