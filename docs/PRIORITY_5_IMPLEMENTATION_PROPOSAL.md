# 優先度5 実装提案：テンプレート細分化 + ユーザー選択型タイトル機能

**作成日**: 2026年1月17日  
**ステータス**: 提案中  
**目的**: ユーザーが柔軟に記事生成を制御できるようにする

---

## 🎯 実装目標

### 目標1: ユーザー選択型タイトル機能

現在の仕様:
```
生成されたタイトル候補 5 個
  → 自動的に最初の案を選択
```

改善後の仕様:
```
生成されたタイトル候補 5 個
  → ユーザーが選択可能に

実装方法A: Google Sheets UI の改善
  - 「タイトル候補」という新しい列を追加
  - Article_Theme シートに自動入力
  - ユーザーが5つの中から1つ選択
  - ステータスを「生成待ち」に変更
  → article_generator_html_v2.py が「生成待ち」の行を処理

実装方法B: CLI ツールの作成
  - article_generator_html_v2.py をインタラクティブ化
  - 5つのタイトル候補を表示
  - ユーザーが番号で選択（1-5）
  - その後、記事生成に進む

実装方法C: Google Forms との連携
  - Google Form で「どのタイトルが最適か」を投票
  - 最も票を集めたタイトルを使用
  - 複数チーム間でも共有可能
```

### 目標2: テンプレートのさらなる細分化

現在: **10個のテンプレート**

```
1. 商品レビュー型
2. 初心者ガイド型
3. 悩み解決型
4. 経済・ビジネス型
5. 製品比較型
6. 成分・科学解説型
7. 体験談・ライフスタイル型
8. 海外トレンド・ニュース型
9. 属性別最適化型
10. 購入ガイド・コスパ型
```

拡張案: **15-20個のテンプレート**への細分化

```
【商品・購入系】（4個→6個）
1. 単一商品レビュー型（1商品を詳しく）
2. 複数商品比較型（3-5商品の比較）
3. ブランド比較型（ブランド間の比較）
4. 初心者向け商品ガイド型
5. 上級者向け商品ガイド型
6. 購入ガイド・コスパ型

【知識・解説系】（3個→5個）
7. 基礎知識解説型
8. 科学的根拠解説型
9. 歴史・背景解説型
10. 法律・規制解説型
11. 業界トレンド解説型

【課題解決系】（2個→3個）
12. 医学的課題解決型（医学的根拠あり）
13. 日常的課題解決型（生活の質向上）
14. ビジネス・パフォーマンス型

【コンテンツ系】（1個→3個）
15. 体験談型（個人の経験）
16. インタビュー型（複数人の声）
17. ケーススタディ型（実例に基づく）

【トレンド・ニュース系】（1個→2個）
18. 海外ニュース翻訳型
19. 業界ニュース解説型
```

---

## 📊 実装方法の比較

### 方法A vs 方法B vs 方法C

| 項目 | 方法A (Sheets UI) | 方法B (CLI) | 方法C (Google Forms) |
|------|-----------------|----------|------------------|
| **導入難易度** | 低 | 中 | 中 |
| **ユーザー体験** | 直感的 | ターミナル操作 | フォーム入力 |
| **自動化レベル** | 中 | 低 | 高 |
| **チーム共有性** | 高 | 低 | 高 |
| **推奨度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |

---

## 💡 提案内容

**推奨: 方法A + 方法B の組み合わせ**

### フェーズ1: 方法A の実装（推奨）
```
Article_Theme シートを改修:

【現在の構成】
A列: タイムスタンプ
B列: ステータス
C列: 記事タイトル
D列: 記事の分類
E列: ターゲット
F列: タグ
G列: ディスクリプション
H列: スラッグ
I列: アフィリエイトリンク
J列: 使用テンプレート

【改修後の構成】
A列: タイムスタンプ
B列: ステータス
C列: 記事タイトル
D列: 記事の分類
E列: ターゲット
F列: タグ
G列: ディスクリプション
H列: スラッグ
I列: アフィリエイトリンク
J列: 使用テンプレート
✨ K列: 【新】タイトル候補1
✨ L列: 【新】タイトル候補2
✨ M列: 【新】タイトル候補3
✨ N列: 【新】タイトル候補4
✨ O列: 【新】タイトル候補5
✨ P列: 【新】選択されたタイトル（ユーザーが入力）
```

ユーザーのワークフロー:
```
1. Article_Theme にテーマを入力
2. ステータスを「新規」に設定
3. 手動でスクリプトを実行
4. タイトル候補が K～O 列に自動入力される
5. ユーザーが P 列に選択したタイトルを入力
6. ステータスを「生成待ち」に変更
7. article_generator_html_v2.py が「生成待ち」を処理
8. 記事が生成される
```

### フェーズ2: テンプレートの細分化
```
TEMPLATES 辞書を拡張:

現在:
TEMPLATES = {
    1: {"name": "商品レビュー型", "require_product": True},
    2: {"name": "初心者ガイド型", "require_product": True},
    ...
    10: {"name": "購入ガイド・コスパ型", "require_product": True},
}

改修後:
TEMPLATES = {
    1: {"name": "単一商品レビュー型", "require_product": True, "focus": "single_product"},
    2: {"name": "複数商品比較型", "require_product": True, "focus": "multi_product"},
    ...
    20: {"name": "業界ニュース解説型", "require_product": False, "focus": "industry_news"},
}
```

---

## 🔧 実装の詳細

### 新規スクリプト: `generate_title_options.py`

```python
#!/usr/bin/env python3
"""
タイトル候補をGoogle Sheets に自動入力するスクリプト
ユーザーが選択できるようにする
"""

def generate_and_populate_titles():
    """
    Article_Theme の「新規」ステータスの行に対して、
    タイトル候補を生成し、K～O 列に自動入力
    """
    
    # 1. Article_Theme から「新規」ステータスの行を取得
    # 2. 各行に対して generate_title_variations() を実行
    # 3. 5つのタイトル候補を取得
    # 4. K～O 列に書き込み
    # 5. ステータスを「タイトル選択待ち」に変更
```

### 改修スクリプト: `article_generator_html_v2.py`

```python
# 変更点1: ステータスの判定を更新

現在:
if status != "新規":
    continue

改修後:
if status not in ["新規", "タイトル選択待ち", "生成待ち"]:
    continue

# 変更点2: タイトルの選択ロジックを更新

現在:
title_options = generate_title_variations(theme, template_id)
selected_title = title_options[0]  # 最初を採用

改修後:
# P列（選択されたタイトル）が入力されている場合はそれを使用
if selected_title_from_sheet:
    selected_title = selected_title_from_sheet
else:
    # P列が空の場合は、タイトル候補を生成
    title_options = generate_title_variations(theme, template_id)
    selected_title = title_options[0]
```

---

## 📈 期待効果

| 項目 | 現在 | 改修後 | 効果 |
|------|-----|-------|------|
| **ユーザー制御性** | 低（自動選択） | 高（手動選択） | 記事の質向上 |
| **テンプレート数** | 10個 | 15-20個 | 多様なコンテンツ |
| **記事の多様性** | 中 | 高 | CVR 向上の可能性 |
| **手作業** | 最小限 | 中程度（選択のみ） | 品質と自動化のバランス |

---

## 🚀 実装手順

### ステップ1: Google Sheets の改修（1時間）
```
- Article_Theme にタイトル候補列を追加（K～P列）
- スクリーンショット付きのマニュアル作成
```

### ステップ2: `generate_title_options.py` の作成（1.5時間）
```
- タイトル候補生成ロジック
- Google Sheets への書き込み
- エラーハンドリング
```

### ステップ3: `article_generator_html_v2.py` の改修（1時間）
```
- ステータス判定の更新
- タイトル選択ロジックの変更
- テスト実行
```

### ステップ4: テンプレートの細分化（2時間）
```
- TEMPLATES 辞書の拡張
- 各テンプレートのプロンプト最適化
- テスト実行
```

**総所要時間: 約5時間**

---

## ✅ チェックリスト

- [ ] 方法の選択と承認
- [ ] Google Sheets の改修
- [ ] `generate_title_options.py` の作成
- [ ] `article_generator_html_v2.py` の改修
- [ ] テンプレートの細分化
- [ ] テスト実行
- [ ] ユーザーマニュアルの作成
- [ ] 実装完了

---

## ❓ 質問

1. **タイトル選択方法について**
   - Google Sheets UI で選択したいですか？
   - CLI ツールで対話的に選択したいですか？
   - Google Forms で投票したいですか？

2. **テンプレートの細分化について**
   - 15個～20個に拡張することに同意しますか？
   - さらに細分化すべき領域はありますか？

3. **優先順位について**
   - 方法A（Sheets UI）を優先して実装しますか？
   - それとも方法B（CLI）から先に実装しますか？

---

## 📞 次のアクション

以下の確認をいただけますか？

```
[ ] 実装方法の選択（方法A / 方法B / 方法C）
[ ] テンプレート細分化の承認
[ ] 実装を進める許可（進めてよい / 要相談 / 待機）
```

ご回答をお待ちしています！ 🚀

