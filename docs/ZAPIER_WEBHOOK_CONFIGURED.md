# Zapier Webhook設定完了

## 📋 設定内容

✅ **Webhook URL:** `https://hooks.zapier.com/hooks/catch/25995545/ug3pexl/`

---

## 🎯 タスク数設計（変更なし）

### タスク数の計算

**1回の承認→投稿で消費するタスク数:**
- Webhook受信（Catch Hook）: 1タスク
- X (Twitter) Create Tweet: 1タスク
- **合計: 2タスク/回**

### 月間タスク数の見積もり（変更なし）

| パターン | 1日のツイート数 | タスク数/月 | バッファ | 評価 |
|---------|--------------|-----------|---------|------|
| **推奨** | 1回 | 60タスク | 40タスク | ✅ 安全 |
| 週5日 | 1回 | 40タスク | 60タスク | ✅ 余裕 |
| 2日に1回 | 0.5回 | 30タスク | 70タスク | ✅ 余裕 |

**結論: タスク数を考慮した場合でも、設計は変わりません。**

---

## ✅ タスク数を節約するベストプラクティス

### 1. エラー時の再試行を避ける

現在の設計では、エラーが発生しても再試行しないため、無駄なタスク消費を防いでいます。

### 2. 定期実行スクリプトと併用（推奨）

**通常:** 定期実行スクリプトで毎朝7:15に投稿（Zapierタスクを消費しない）
**即時投稿が必要な場合のみ:** Zapier Webhookを使用

**メリット:**
- ✅ タスク数を大幅に節約（月約30タスク → 必要時のみ使用）
- ✅ 確実に動作
- ✅ 完全無料

### 3. タスク数監視

- **週1回:** Zapierダッシュボードで月間タスク数を確認
- **80タスク以上:** 定期実行スクリプトに切り替えを検討

---

## 🚀 次のステップ

### Step 1: Google Apps Scriptを更新

1. **スプレッドシートを開く:**
   https://docs.google.com/spreadsheets/d/1-2L6C3NpF8vqnXxHWKP-Js3TMFKYE73tTtxdkZVPTaM/edit

2. **「拡張機能」→「Apps Script」を選択**

3. **`google_sheets_trigger.gs` ファイルを開く**

4. **`WEBHOOK_URL` が正しく設定されているか確認:**
   ```javascript
   WEBHOOK_URL: 'https://hooks.zapier.com/hooks/catch/25995545/ug3pexl/',
   ```

5. **ファイルを保存**（Ctrl+S / Cmd+S）

### Step 2: テスト実行

1. **スプレッドシートの2行目（B2）に「承認済み」と入力**

2. **Enterを押す**

3. **X (Twitter)でツイートを確認**

4. **Zapierダッシュボードで実行履歴を確認**
   - 「History」タブで実行履歴を確認
   - タスク数が2タスク消費されたことを確認

✅ **完了:** テスト実行

---

## 📊 タスク数監視表（テンプレート）

### 月間タスク数管理

| 週 | 日付 | ツイート数 | タスク数 | 累計タスク数 | 残りタスク数 | 備考 |
|---|------|----------|---------|------------|------------|------|
| 1週目 | 1/1-1/7 | 7回 | 14タスク | 14タスク | 86タスク | |
| 2週目 | 1/8-1/14 | 7回 | 14タスク | 28タスク | 72タスク | |
| 3週目 | 1/15-1/21 | 7回 | 14タスク | 42タスク | 58タスク | |
| 4週目 | 1/22-1/28 | 7回 | 14タスク | 56タスク | 44タスク | |
| 5週目 | 1/29-1/31 | 3回 | 6タスク | 62タスク | 38タスク | |

**推奨:** 毎日1回ツイート = 62タスク/月（バッファ38タスク）

---

## ⚠️ 注意点

### 1. エラー時のタスク消費

- **Webhookエラー** - タスクを消費する場合がある（1タスク）
- **X APIエラー** - タスクを消費する場合がある（1タスク）
- **エラーが多い場合は、定期実行スクリプトに切り替えを検討**

### 2. タスク数が80を超えた場合

- **定期実行スクリプトに切り替え**（推奨）
- **ツイート頻度を調整**（毎日1回 → 2日に1回）

### 3. 月末の調整

- **月末にタスク数が80を超えたら:** 定期実行スクリプトに切り替え
- **月末にタスク数が50以下:** 追加ツイートを検討

---

## 📝 実装チェックリスト

### 必須項目

- [ ] **Step 1:** Google Apps ScriptにWebhook URLを設定
- [ ] **Step 2:** テスト実行
- [ ] **タスク数確認:** Zapierダッシュボードで実行履歴を確認

### 推奨項目

- [ ] **タスク数監視:** 週1回、月間タスク数を確認
- [ ] **定期実行スクリプト:** バックアップとして設定（オプション）

---

## 🚀 次のステップ

1. **Google Apps ScriptにWebhook URLを設定**（Step 1）
2. **テスト実行**（Step 2）
3. **タスク数監視**（推奨）

詳細は `docs/ZAPIER_FREE_PLAN_DESIGN.md` と `docs/TASK_COUNT_MONITORING.md` を参照してください。

---

**結論: タスク数を考慮した場合でも、設計は変わりません。毎日1回のツイート投稿なら、月60タスクで余裕があります！**
