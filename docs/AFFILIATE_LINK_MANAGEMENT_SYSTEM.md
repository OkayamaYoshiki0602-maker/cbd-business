# アフィリエイトリンク管理システム

## 🎯 目的

1. **アフィリエイトリンクの作成・管理を簡略化**
   - 楽天アフィリエイト
   - A8.net
   - もしもアフィリエイト
   - Googleスプレッドシートで一元管理

2. **WordPress記事に簡単に挿入**
   - ショートコード: `[affiliate id="商品ID"]`
   - 自動でアフィリエイトリンクを生成

3. **GA4連携の自動化**
   - クリックを自動でGA4に送信
   - コンバージョン率を自動測定

---

## 📋 システム構成

### 1. Googleスプレッドシート（データベース）

**スプレッドシートの構成:**

| 商品ID | 商品名 | アフィリエイトサービス | アフィリエイトURL | 通常URL | 商品画像URL | 価格 | 説明 | 作成日 |
|--------|--------|----------------------|------------------|---------|------------|------|------|--------|
| cbd-oil-001 | CBDオイル 10ml | 楽天 | https://... | https://... | https://... | 5,980円 | 初めての方におすすめ | 2025-01-11 |

### 2. WordPressショートコード

**使用方法:**
```
[affiliate id="cbd-oil-001"]
```

**表示結果:**
- アフィリエイトリンクが自動で生成される
- GA4連携も自動で設定される

---

## 🚀 実装手順

### Phase 1: Googleスプレッドシートの作成（30分）

1. **新しいスプレッドシートを作成**
   - 名前: `CBDアフィリエイトリンク管理`

2. **シート構成を設定**
   - シート名: `商品リスト`

3. **列を設定**
   - A列: 商品ID（必須）
   - B列: 商品名（必須）
   - C列: アフィリエイトサービス（必須: 楽天/A8/もしも）
   - D列: アフィリエイトURL（必須）
   - E列: 通常URL（オプション）
   - F列: 商品画像URL（オプション）
   - G列: 価格（オプション）
   - H列: 説明（オプション）
   - I列: 作成日（自動）

4. **サンプルデータを追加**
   - 3-5件のサンプル商品を追加

---

### Phase 2: WordPressプラグインの作成（1時間）

1. **プラグインファイルを作成**
   - `wp-content/plugins/cbd-affiliate-link-manager/cbd-affiliate-link-manager.php`

2. **Google Sheets APIでデータを取得**
   - スプレッドシートから商品情報を読み込む
   - キャッシュ機能を追加（1時間キャッシュ）

3. **ショートコードを実装**
   - `[affiliate id="商品ID"]` でリンクを生成
   - アフィリエイトリンクに自動で `data-affiliate` 属性を追加

4. **GA4連携を自動化**
   - Google Tag Managerで自動検出
   - GA4にイベントを自動送信

---

### Phase 3: Google Tag Managerの設定（30分）

1. **GA4連携タグを作成**
   - アフィリエイトリンクのクリックを自動検出
   - GA4にイベントを自動送信

2. **テスト**
   - サイトを訪問してアフィリエイトリンクをクリック
   - GA4でイベントが記録されているか確認

---

## 📊 使用例

### スプレッドシートでの管理

1. **商品を追加**
   - スプレッドシートに商品情報を入力
   - 商品IDを設定（例: `cbd-oil-001`）

2. **アフィリエイトURLを貼り付け**
   - 楽天、A8.net、もしものアフィリエイトURLを貼り付け

### WordPress記事での使用

1. **記事編集画面を開く**
2. **ショートコードを入力**
   ```
   [affiliate id="cbd-oil-001"]
   ```

3. **プレビューで確認**
   - アフィリエイトリンクが正しく表示されるか確認

---

## 🔧 実装ファイル

### 1. Googleスプレッドシートテンプレート
- `CBD関連/アフィリエイトリンク管理.gsheet` として作成

### 2. WordPressプラグイン
- `wordpress/cbd-affiliate-link-manager.php`

### 3. 設定ガイド
- `docs/AFFILIATE_LINK_SETUP_GUIDE.md`

---

## ✅ 実装後の効果

### 作業時間の短縮
- **従来**: アフィリエイトリンク作成 + 貼り付け = 5-10分/商品
- **実装後**: スプレッドシートに入力 + ショートコード = 1-2分/商品
- **削減時間**: 約80%削減

### 管理の効率化
- ✅ すべてのアフィリエイトリンクを一元管理
- ✅ スプレッドシートで簡単に編集・追加・削除
- ✅ 商品情報を再利用可能

### GA4連携の自動化
- ✅ すべてのアフィリエイトリンクのクリックが自動でGA4に送信
- ✅ コンバージョン率を自動で測定
- ✅ どの商品が人気か自動で分析可能

---

## 📝 次のアクション

1. **Googleスプレッドシートの作成**
   - テンプレートを作成
   - サンプルデータを追加

2. **WordPressプラグインの実装**
   - プラグインコードを作成
   - テスト

3. **Google Tag Managerの設定**
   - GA4連携タグを作成
   - テスト
